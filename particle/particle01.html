<!DOCTYPE html>
<html lang="en"></html>
<head>
  <meta charset="UTF-8">
  <title>Threejs particle01 Sample</title>
</head>
<body>
  <h1>パーティクル</h1>
  <ul>
    <li><a href="../index.html">HOME</a></li>
    <li><a href="../cube/cube01.html">cube01</a></li>
    <li><a href="../cube/cube02.html">cube02</a></li>
    <li><a href="../cube/cube03.html">cube03</a></li>
    <li><a href="../line/line01.html">line01</a></li>
    <li><a href="../line/line02.html">line02</a></li>
    <li><a href="../line/line03.html">line03</a></li>
    <li><a href="../line/line04.html">line04</a></li>
    <li><a href="../circle/circle01.html">circle01</a></li>
    <li><a href="../circle/circle02.html">circle02</a></li>
    <li><a href="../particle/particle01.html">particle01</a></li>
    <li><a href="../uniqe/uniqe01.html">uniqe01</a></li>
    <li><a href="../uniqe/uniqe02.html">uniqe02</a></li>
    <li><a href="../uniqe/uniqe03.html">uniqe03</a></li>
    <li><a href="../other/other01.html">other01</a></li>
    <li><a href="../other/other02.html">other02</a></li>
    <li><a href="../helper/helper01.html">helper01</a></li>
    <li><a href="../demo/circle2d-animation.html">DEMO: circle2d-animation</a></li>
    <li><a href="../demo/buffer-geometry.html">DEMO: buffer-geometry</a></li>
  </ul>
  <script src="../common/threejs/build/three.min.js"></script>
  <script>(function() {
  var Webgl, requestAnimationFrame;

  requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

  window.requestAnimationFrame = requestAnimationFrame;

  window.addEventListener("DOMContentLoaded", function() {
    return Webgl.init();
  });

  Webgl = (function() {
    function Webgl() {}

    Webgl.init = function() {
      this.width = window.innerWidth;
      this.height = window.innerHeight;
      this.initCamera();
      this.createScene();
      this.helper();
      this.initMaterial();
      return this.renderFun();
    };


    /*
    	 * カメラの設定
     */

    Webgl.initCamera = function() {
      var aspect, fav, fov, near;
      fov = 45;
      aspect = this.width / this.height;
      near = 1;
      fav = 1000;
      this.camera = new THREE.PerspectiveCamera(fov, aspect, near, fav);
      this.camera.position.set(50, 50, 200);
      this.camera.up.set(0, 0, 1);
      return this.camera.lookAt({
        x: 0,
        y: 0,
        z: 0
      });
    };


    /*
    	 * シーンの作成
     */

    Webgl.createScene = function() {
      this.scene = new THREE.Scene;
      this.group = new THREE.Group;
      return this.scene.add(this.group);
    };


    /*
    	 * ヘルパー
     */

    Webgl.helper = function() {
      var axis;
      axis = new THREE.AxisHelper(200);
      axis.position.set(0, 0, 0);
      return this.group.add(axis);
    };


    /*
    	 * メッシュの作成
     */

    Webgl.initMaterial = function() {
      var color, colors, count, geometry, i, j, material, particle, ref, texture, vertex;
      geometry = new THREE.Geometry;
      count = 1000;
      colors = [];
      for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        vertex = new THREE.Vector3;
        vertex.x = (Math.random() - 0.5) * 100;
        vertex.y = (Math.random() - 0.5) * 100;
        vertex.z = (Math.random() - 0.5) * 100;
        geometry.vertices.push(vertex);
        color = new THREE.Color(0xFFFFFF);
        color.setHSL(210 / 360, 1, 0.5);
        colors.push(color);
      }
      geometry.colors = colors;
      texture = THREE.ImageUtils.loadTexture("/images/particle.png");
      material = new THREE.PointCloudMaterial({
        size: 10,
        vertexColors: true,
        map: texture,
        blending: THREE.AdditiveBlending,
        transparent: true
      });
      particle = new THREE.PointCloud(geometry, material);
      particle.sortParticles = true;
      return this.group.add(particle);
    };


    /*
    	 * レンダラーの作成
     */

    Webgl.renderFun = function() {
      this.renderer = new THREE.WebGLRenderer;
      this.renderer.setSize(this.width, this.height);
      document.body.appendChild(this.renderer.domElement);
      return this.renderer.render(this.scene, this.camera);
    };

    return Webgl;

  })();

}).call(this);

  </script>
</body>